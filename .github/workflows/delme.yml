name: Choice Playground
on:
  workflow_dispatch:
    branches:
      - main
    inputs:
      version_segment:
        description: 'Select which version segment to bump'
        required: true
        default: 'patch'
        type: choice
        options:
          - major
          - minor
          - patch
jobs:
  prepare-release:
    name: Create GitHub Release
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo "You selected: ${{ github.event.inputs.version_segment }}"
      - name: shell exec
        id: step-version
        run: |
          newVersion=$(./bin/version_bump.sh "${{ github.event.inputs.version_segment }}")
          rc=$?
          if [ $rc -ne 0 ]; then
            echo "version script failed with exit code $rc" >&2
            exit $rc
          fi
          echo "new_version=$newVersion" >> $GITHUB_OUTPUT
      - run: |
          echo "New version: ${{ steps.step-version.outputs.new_version }}"